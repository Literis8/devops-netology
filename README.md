# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендеров и областей применения."

## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и 
виртуализации на основе ОС.

### Решение:
Полная виртуализация подразумевает что в качестве ОС на хостовой машине выступает сам гипервизор, он же является
"посредником" между аппаратной частью хоста и гостевой ОС. В паравиртуализации гипервизор является "посредником" между
гостевой ОС и хостовой. В контейнеризации (виртуализации на основе ОС) гипервизора как-такового не существует, ОС сама 
создает пространство для гостевых ОС при этом в гостевых ОС используется ядро хостовой.

### Вопрос на доработку:
Добрый день!  

Задание 1  
В чём разница при работе с ядром гостевой ОС для полной и паравиртуализации?  

С уважением,  
Алексей

### Доработка:
В паравиртуализации ядро гостевой операционной системы модифицируется для разделения доступа к ресурсам хоста, в полной
виртуализации ядро ОС гостевой ОС не модифицируется.

## Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

* физические сервера,
* паравиртуализация,
* виртуализация уровня ОС.

Условия использования:

* Высоконагруженная база данных, чувствительная к отказу.
* Различные web-приложения.
* Windows системы для использования бухгалтерским отделом.
* Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Решение:
* Высоконагруженная база данных, чувствительная к отказу - физические сервера. Использование физических серверов 
позволит использовать все физические ресурсы машины, при этом не тратя ресурсы на обеспечение виртуализации, так же 
это позволит снизить потенциальные точки отказа. 
* Различные web-приложения - виртуализация уровня ОС. В современной веб разработке принято делить систему на 
микросервисы отдельный контейнер для frontend, отельный для backend, отдельный для базы данных. Данный подход позволяет
оперативно пересобирать части сервиса, при этом снижает время простоя, позволяет разработчикам независимо друг от друга
производить доработки сервиса.
* Windows системы для использования бухгалтерским отделом - паравиртуализация. Hyper-V в данном случае является наиболее
подходящим вариантом для windows систем. Удобно делать резервное копирования всех гостевых машин. Так же не требуется 
больших вычислительных мощностей.
* Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера. В случаях когда требуется
высокопроизводительные системы лучше использовать физические сервера, тем более что виртуализация может значительно
сократить производительность при доступе к ресурсам GPU

## Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:
1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based 
инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного 
механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) 
инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Решение:
#### Сценарий 1:
Объем машин довольно большой, стоят задачи связанные с балансировкой нагрузки, репликаций. Для данного решения 
оптимально подойдет ESXi. Стоимость решения возможно будет дороже чем у аналогов, однако, в данном случае можно будет
сэкономить за счет меньшего количества административных ресурсов задействованных во внедрении и поддержке аналогичных
продуктов других производителей.

#### Сценарий 2:
В данном случае оптимальным будет KVM, а для упрощения администрирования в сочетании с Proxmox. Так же возможно
рассмотреть вариант с Xen PV, однако, в данном случае возможно будут большие административные издержки.

#### Сценарий 3:
Для Windows инфраструктуры оптимальным вариантом будет Hyper-V как наиболее оптимизированное под Windows

#### Сценарий 4:
В данном случае идеальным вариантом будет использование Docker. В Docker-hub содержится огромное количество готовых
образов для различных linux дистрибутивов, которые можно будет быстро развернуть.

## Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления 
виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, 
то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Решение:
Недостатки гетерогенной среды заключается в том что возникнут проблемы с миграциями виртуальных машин, вероятно будет
недоступен функционал репликаций. Так же при неосмотрительном распределении ресурсов могут быть существенные просадки в
производительности. Соответственно для минимизации рисков следует внимательно относится к распределению ресурсов в
каждой из сред виртуализации. Но при всем этом использование виртуальной машины на которой будут развернуты 
микросервисы в докере вполне допустимо. Например, на нашем предприятии используются несколько сервисов которые 
размещены в KVM, на данных виртуальных машинах используется докер для размещения микросервисов веб приложения.