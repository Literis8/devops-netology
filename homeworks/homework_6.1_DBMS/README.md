# Домашнее задание к занятию "6.1. Типы и структура СУБД".
## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

* Электронные чеки в json виде
* Склады и автомобильные дороги для логистической компании
* Генеалогические деревья
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации
* Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Решение:
* Электронные чеки в json виде - хранение электронных чеков не подразумевает реляционных отношений в базе, по этому 
на мой взгляд оптимально подойдет NoSQL СУБД, например MongoDB.
* Склады и автомобильные дороги для логистической компании - этот случай уже сложнее, подразумевается наличие связей
между таблицами, склады привязываются к дорогам, привязка транспорта к складам и станциям ТО. Идеально подойдет SQL,
например PostgreSQL или MySQL.
* Генеалогические деревья - подойдет NoSQL СУБД сетевого или графового вида, на первый взгляд может показаться что
оптимальной будет иерархическая, однако, она не сможет обеспечить связь дочернего объекта между двумя родителями.
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации - для хранения кэша отлично
подойдет NoSQL ключ-значение Redis 
* Отношения клиент-покупка для интернет-магазина - на мой взгляд подойдет как SQL так и NoSQL решения, если требуется
высокая производительность и скорость обработки результата можно воспользоваться NoSQL например MongoDB, если же 
требуется высокая точность в расчетах и постоянная актуальность данных я бы использовал SQL систему например PostgreSQL

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

* Данные записываются на все узлы с задержкой до часа (асинхронная запись)
* При сетевых сбоях, система может разделиться на 2 раздельных кластера
* Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Решение:
* Данные записываются на все узлы с задержкой до часа (асинхронная запись) - по теореме CAP в связи с тем что данные 
синхронизируются долго то систему нельзя назвать согласованной, соответственно я бы классифицировал данную систему как 
AP. По теореме PACELC если система разделена то данные доступны, но не точны, а если система не разделена, то 
присутствуют задержки, следовательно, PA/EL
* При сетевых сбоях, система может разделиться на 2 раздельных кластера - по теореме CAP в данной системе отсутствует 
устойчивость к разделению, соответственно данную систему можно классифицировать как CA. По PACELC разделенная система
будет доступна, но не согласована, в неразделенном виде предполагаю что система будет согласована PA/EC
* Система может не прислать корректный ответ или сбросить соединение - по теореме CAP отсутствие доступности, система CP
по PACELC в связи с тем что данная система работает в ущерб доступности, предполагаю что она в этом случае должна быть
согласованной как в обычном режиме работы, так и в разделенном, PC/EC.

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ:
Я считаю что нам ничто не мешает построить систему, которая будет сочетать как принципы BASE, так и ACID. Я думаю не
просто так их назвали кислотой и щелочью. Тут по принципу pH можно создать систему, которая будет сочетать в себе как
части преимуществ одной системы так и другой, однако, по скольку ACID - это требование к СУБД, а BASE - это всего лишь 
принцип построения, такую комбинированную систему мы не сможем назвать соответствующей ACID.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ:
Предполагаю что данная система Redis. Из недостатков данной системы можно отметить следующие:
* Система хранит данные в оперативной памяти, что может приводить к потере данных, а так же ограничивает общий объем 
данных
* По-умолчанию не поддерживает автоматическое переключение ведущей ноды при ее отказе.
* Нет сегментации на пользователей или группы пользователей. Отсутствует контроль доступа
